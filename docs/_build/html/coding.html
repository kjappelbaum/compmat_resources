

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Coding &mdash; Computational Materials Science Resources  documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Machine Learning" href="ml.html" />
    <link rel="prev" title="Welcome to Computational Materials Science Resources" href="index.html" /> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> Computational Materials Science Resources
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Coding</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#general">General</a></li>
<li class="toctree-l2"><a class="reference internal" href="#python">Python</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#jupyter-notebooks-on-hpc-environments">Jupyter notebooks on HPC environments</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#using-configuration-file">Using configuration file</a></li>
<li class="toctree-l4"><a class="reference internal" href="#using-tunneling">Using tunneling</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#online">Online</a></li>
<li class="toctree-l3"><a class="reference internal" href="#faster-python">Faster Python</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#c">C</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id1">Online</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#editors-ides">Editors/IDEs</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#vim">VIM</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#configuration">Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="#plugins">Plugins</a></li>
<li class="toctree-l4"><a class="reference internal" href="#commands">Commands</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#pycharm">PyCharm</a></li>
<li class="toctree-l3"><a class="reference internal" href="#sublime">Sublime</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#development-process">Development process</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#starting-a-project">Starting a project</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ci-cd">CI/CD</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#docker">Docker</a></li>
<li class="toctree-l4"><a class="reference internal" href="#git-hub">Git(hub)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#pre-commit">Pre-Commit</a></li>
<li class="toctree-l3"><a class="reference internal" href="#documentation">Documentation</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="ml.html">Machine Learning</a></li>
<li class="toctree-l1"><a class="reference internal" href="math.html">Math</a></li>
<li class="toctree-l1"><a class="reference internal" href="plotting.html">Plotting</a></li>
<li class="toctree-l1"><a class="reference internal" href="electronic_structure_codes.html">Electronic Structure Codes</a></li>
<li class="toctree-l1"><a class="reference internal" href="dft.html">QM and DFT theoretical background</a></li>
<li class="toctree-l1"><a class="reference internal" href="classical.html">Classical simulations</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Computational Materials Science Resources</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Coding</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/coding.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="coding">
<h1>Coding<a class="headerlink" href="#coding" title="Permalink to this headline">¶</a></h1>
<div class="section" id="general">
<h2>General<a class="headerlink" href="#general" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Software developers who train for interviews use <a class="reference external" href="https://www.hackerrank.com/interview/interview-preparation-kit">Hackerrank</a> but it has nice problems if you just want to improve your computational thinking and coding skills in general</li>
<li>The <a class="reference external" href="https://pragprog.com/book/jwdsal/a-common-sense-guide-to-data-structures-and-algorithms">Common-Sense Guide to Data Structures and Algorithms: Level Up Your Core Programming Skills</a>, written by Jay Wengrow, is a fast and easy read to get an introductions to datastructures, time complexity and some important sorting and searching algorithms</li>
<li>for filemagement I find it useful to sometimes use
* <a class="reference external" href="http://mama.indstate.edu/users/ice/tree/">tree</a>
* and for copying files etc. <a class="reference external" href="https://midnight-commander.org/">midnightcommander</a></li>
</ul>
</div>
<div class="section" id="python">
<h2>Python<a class="headerlink" href="#python" title="Permalink to this headline">¶</a></h2>
<div class="section" id="jupyter-notebooks-on-hpc-environments">
<h3>Jupyter notebooks on HPC environments<a class="headerlink" href="#jupyter-notebooks-on-hpc-environments" title="Permalink to this headline">¶</a></h3>
<div class="section" id="using-configuration-file">
<h4>Using configuration file<a class="headerlink" href="#using-configuration-file" title="Permalink to this headline">¶</a></h4>
<p>In some cases it can be useful to, instead of running the ipython kernel on the headnode, to just submit it
to computing node of cluster and then access the kernel from the browser (either from the headnode or your local machine).</p>
<p>You can achieve this by setting some things in your <code class="code docutils literal"><span class="pre">~/.jupyter/jupyter_notebook_config.py</span></code> file you can
create this file using <code class="code docutils literal"><span class="pre">jupyter</span> <span class="pre">notebook</span> <span class="pre">--generate-config</span></code>.</p>
<p>In this file you then can modify the following:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">c</span><span class="o">.</span><span class="n">NotebookApp</span><span class="o">.</span><span class="n">ip</span> <span class="o">=</span> <span class="s1">&#39;*&#39;</span>
<span class="n">c</span><span class="o">.</span><span class="n">NotebookApp</span><span class="o">.</span><span class="n">open_browser</span> <span class="o">=</span> <span class="kc">False</span>
<span class="n">c</span><span class="o">.</span><span class="n">NotebookApp</span><span class="o">.</span><span class="n">port</span> <span class="o">=</span> <span class="n">XXXXX</span>
</pre></div>
</div>
<p>Where <code class="code docutils literal"><span class="pre">XXXX</span></code> is a number greater than 8888. You might also want to set a password instead of a token
(you can do this in the config file or by running <code class="code docutils literal"><span class="pre">jupyter-notebook</span> <span class="pre">password</span></code>).
In your submission script you can then add <code class="code docutils literal"><span class="pre">hostname</span></code> to print the hostname which you can then use to access
the notebook at <code class="code docutils literal"><span class="pre">hostname:XXXXX</span></code>. In some cases you might also want to hardcode  <code class="code docutils literal"><span class="pre">c.NotebookApp.ip</span></code> to
the ip of a particular compute node and then simply bookmark this address.</p>
</div>
<div class="section" id="using-tunneling">
<h4>Using tunneling<a class="headerlink" href="#using-tunneling" title="Permalink to this headline">¶</a></h4>
<p>Add the following lines to your submission script (in this case setting a password is really useful)</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>unset XDG_RUNTIME_DIR
NODEIP=$(hostname -i)
NODEPORT=$(shuf -i 8888-9999 -n 1)
echo $NODEIP:$NODEPORT

jupyter-notebook --ip=$NODEIP --port=$NODEPORT --no-browser
</pre></div>
</div>
<p><code class="code docutils literal"><span class="pre">shuf</span> <span class="pre">-i</span> <span class="pre">8888-9999</span> <span class="pre">-n</span> <span class="pre">1</span></code> is just to get a random port (binding to 0 and letting the OS is chose is better
practice, but this here is easier). You can then look into the output file which your
scheduler produced as it should contain <code class="code docutils literal"><span class="pre">NODEIP</span></code> and <code class="code docutils literal"><span class="pre">NODEPORT</span></code> which you can then use to
establish a tunnel connection from your local machine using</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>ssh -N -L 8888:$NODEIP:$NODEPORT &lt;username&gt;@&lt;machinename&gt;
</pre></div>
</div>
<p>on your local machine you can now access the jupyter server at <code class="code docutils literal"><span class="pre">http://localhost:8888</span></code>. If you have to use
windows on your local machine, you can set up tunneling using MobaXTerm. On some schedulers you may want to enable
direct writing of output files, on the most recent version of PBS Pro, this is possible with <code class="code docutils literal"><span class="pre">qsub</span> <span class="pre">-koed</span></code>.</p>
<p>Note that in both approaches the kernel will of course die after the walltime is exceeded.</p>
</div>
</div>
<div class="section" id="online">
<h3>Online<a class="headerlink" href="#online" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Valuable and fun are always the <a class="reference external" href="https://www.youtube.com/playlist?list=PLRVdut2KPAguz3xcd22i_o_onnmDKj3MA">talks by Raymond Hettinger</a></li>
<li>Great infoŕmation is in <a class="reference external" href="https://docs.python-guide.org/">The Hitchhiker’s Guide to Python</a></li>
<li><a class="reference external" href="https://www.python-course.eu/python3_course.php">Bernd Klein</a> has also good information on advanced topics such as metaclasses
or memoization with decorators</li>
</ul>
</div>
<div class="section" id="faster-python">
<h3>Faster Python<a class="headerlink" href="#faster-python" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Consider trying <a class="reference external" href="http://pypy.org/features.html">PyPY</a> instead of CPython (check the <a class="reference external" href="http://speed.pypy.org/">benchmarks</a>).</li>
</ul>
</div>
</div>
<div class="section" id="c">
<h2>C<a class="headerlink" href="#c" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id1">
<h3>Online<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><a class="reference external" href="http://www.buildyourownlisp.com/">Build your own lisp</a> is a nice way to get
started with C and learn about lisps</li>
</ul>
</div>
</div>
<div class="section" id="editors-ides">
<h2>Editors/IDEs<a class="headerlink" href="#editors-ides" title="Permalink to this headline">¶</a></h2>
<div class="section" id="vim">
<h3>VIM<a class="headerlink" href="#vim" title="Permalink to this headline">¶</a></h3>
<p>Vim is a really powerful editor, but you need to spend some time learning and
configuring it.</p>
<div class="section" id="configuration">
<h4>Configuration<a class="headerlink" href="#configuration" title="Permalink to this headline">¶</a></h4>
<p>Some useful settings for the <code class="code docutils literal"><span class="pre">.vimrc</span></code> file are:</p>
<ul>
<li><p class="first">syntax highlighting <code class="code docutils literal"><span class="pre">syntax</span> <span class="pre">enable</span></code> is probably self-explanatory</p>
</li>
<li><p class="first">search</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="nb">set</span> <span class="n">incsearch</span>           <span class="s2">&quot; lookahead search</span>
<span class="nb">set</span> <span class="n">ignorecase</span>          <span class="s2">&quot; in most cases I want to be case-insenstivie</span>
<span class="nb">set</span> <span class="n">smartcase</span>           <span class="s2">&quot; unless i explicitely use uppercase</span>
<span class="nb">set</span> <span class="n">hlsearch</span>            <span class="s2">&quot; highlight matches</span>
</pre></div>
</div>
</li>
<li><p class="first">identations</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="nb">set</span> <span class="n">tabstop</span><span class="o">=</span><span class="mi">4</span>           <span class="s2">&quot; number of spaces per &lt;TAB&gt;</span>
<span class="nb">set</span> <span class="n">expandtab</span>           <span class="s2">&quot; convert &lt;TAB&gt; key-presses to spaces in insert mode</span>
<span class="nb">set</span> <span class="n">shiftwidth</span><span class="o">=</span><span class="mi">4</span>        <span class="s2">&quot; set a &lt;TAB&gt; key-press equal to 4 spaces</span>

<span class="nb">set</span> <span class="n">autoindent</span>          <span class="s2">&quot; copy indent from current line when starting a new line</span>
<span class="nb">set</span> <span class="n">smartindent</span>         <span class="s2">&quot; even better autoindent (&#39;smart&#39; insert after e.g. {)</span>
</pre></div>
</div>
</li>
<li><p class="first">Persistent undo</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>if has(&#39;persistent_undo&#39;)
  &quot; Save all undo files in a single location (less messy, more risky)...
  set undodir=$HOME/.VIM_UNDO_FILES

  &quot; Save a lot of back-history...
  set undolevels=5000

  &quot; Actually switch on persistent undo
  set undofile

endif
</pre></div>
</div>
</li>
<li><p class="first">I am paranoid, I want to lose at max 10 keystrokes</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="nb">set</span> <span class="n">updatecount</span><span class="o">=</span><span class="mi">10</span>
</pre></div>
</div>
</li>
<li><p class="first">If you do not want to type all the search replace syntax (vide infra) remap it</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">nmap</span>  <span class="n">S</span>  <span class="p">:</span><span class="o">%</span><span class="n">s</span><span class="o">//</span><span class="n">g</span><span class="o">&lt;</span><span class="n">LEFT</span><span class="o">&gt;&lt;</span><span class="n">LEFT</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>now you need to type only</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">SX</span><span class="o">/</span><span class="n">Y</span><span class="o">&lt;</span><span class="n">CR</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>for global search/replace on all lines.</p>
</li>
</ul>
<p>If you want to see a really crazy setup, check out
<a class="reference external" href="https://github.com/thoughtstream/Damian-Conway-s-Vim-Setup">Damian Conway’s vim setup</a>.
There you can also find how to create the <a class="reference external" href="https://github.com/thoughtstream/Damian-Conway-s-Vim-Setup/blob/master/plugin/SWTC.vim">Star Wars intro in vim</a>.</p>
</div>
<div class="section" id="plugins">
<h4>Plugins<a class="headerlink" href="#plugins" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><a class="reference external" href="https://github.com/zirrostig/vim-schlepp">schelpp</a>: makes it easier to move stuff in visual block</li>
<li><a class="reference external" href="https://github.com/chip/vim-fat-finger">fatfinger</a>: corrects common misspellings</li>
<li><a class="reference external" href="https://www.vim.org/scripts/script.php?script_id=790">python syntax highlighting</a></li>
<li><a class="reference external" href="https://github.com/nvie/vim-flake8">flake8</a> for PEP8 style and error checking</li>
<li>if you are used to <code class="code docutils literal"><span class="pre">&lt;TAB&gt;</span></code> completion, you might like <a class="reference external" href="https://www.vim.org/scripts/script.php?script_id=1643">supertab</a></li>
<li><a class="reference external" href="https://github.com/davidhalter/jedi-vim">jedi-vim</a> for some nice python autocompletion</li>
</ul>
</div>
<div class="section" id="commands">
<h4>Commands<a class="headerlink" href="#commands" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p class="first">Use <code class="code docutils literal"><span class="pre">$</span></code> to get to the end of the lines</p>
</li>
<li><p class="first">Use different navigation levels <code class="code docutils literal"><span class="pre">b</span></code>, <code class="code docutils literal"><span class="pre">w</span></code>, <code class="code docutils literal"><span class="pre">{</span></code> and <code class="code docutils literal"><span class="pre">(</span></code></p>
</li>
<li><p class="first">Search/Replace (<code class="code docutils literal"><span class="pre">g</span></code> means global)</p>
<blockquote>
<div><ul class="simple">
<li>all lines <code class="code docutils literal"><span class="pre">:%s/foo/bar/g</span></code></li>
<li>this line <code class="code docutils literal"><span class="pre">:s/foo/bar/g</span></code></li>
</ul>
</div></blockquote>
</li>
</ul>
</div>
</div>
<div class="section" id="pycharm">
<h3>PyCharm<a class="headerlink" href="#pycharm" title="Permalink to this headline">¶</a></h3>
<p>PyCharm is the IDE I use for larger python projects, some useful features are:</p>
</div>
<div class="section" id="sublime">
<h3>Sublime<a class="headerlink" href="#sublime" title="Permalink to this headline">¶</a></h3>
<p>Sublime is a lot faster than PyCharm and supports basically all languages.</p>
</div>
</div>
<div class="section" id="development-process">
<h2>Development process<a class="headerlink" href="#development-process" title="Permalink to this headline">¶</a></h2>
<div class="section" id="starting-a-project">
<h3>Starting a project<a class="headerlink" href="#starting-a-project" title="Permalink to this headline">¶</a></h3>
<p>The easiest way to start a (python) project is to use a <a class="reference external" href="https://github.com/audreyr/cookiecutter">cookiecutter</a>
that creates the basic project structure and also some configuration files for you.
A nice one in the field of molecular simulations is the
<a class="reference external" href="https://github.com/MolSSI/cookiecutter-cms">cookiecutter for computational molecular sciences python packages</a></p>
</div>
<div class="section" id="ci-cd">
<h3>CI/CD<a class="headerlink" href="#ci-cd" title="Permalink to this headline">¶</a></h3>
<div class="section" id="docker">
<h4>Docker<a class="headerlink" href="#docker" title="Permalink to this headline">¶</a></h4>
<p>On HPC environments, where you don’t have root rights, <a class="reference external" href="https://www.sylabs.io/docs/">singularity</a> might be a
way to go. There is also a <a class="reference external" href="https://github.com/singularityware/docker2singularity">image to convert singularity images to docker images</a></p>
</div>
<div class="section" id="git-hub">
<h4>Git(hub)<a class="headerlink" href="#git-hub" title="Permalink to this headline">¶</a></h4>
</div>
</div>
<div class="section" id="pre-commit">
<h3>Pre-Commit<a class="headerlink" href="#pre-commit" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="documentation">
<h3>Documentation<a class="headerlink" href="#documentation" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><a class="reference external" href="http://docutils.sourceforge.net/docs/user/rst/quickref.html">ReStructured Text Quickreference</a>: useful when writing sphinx docs</li>
</ul>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="ml.html" class="btn btn-neutral float-right" title="Machine Learning" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral" title="Welcome to Computational Materials Science Resources" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Kevin M. Jablonka

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    
    
      <script type="text/javascript">
          var DOCUMENTATION_OPTIONS = {
              URL_ROOT:'./',
              VERSION:'',
              LANGUAGE:'None',
              COLLAPSE_INDEX:false,
              FILE_SUFFIX:'.html',
              HAS_SOURCE:  true,
              SOURCELINK_SUFFIX: '.txt'
          };
      </script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    

  

  <script type="text/javascript" src="_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>